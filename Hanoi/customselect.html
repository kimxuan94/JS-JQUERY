<!DOCTYPE html>
<html>
<head>
      <meta charset="utf-8">
      <title>Custom select</title>
      <link rel="stylesheet" href="assets/css/master.css" media="screen" title="no title" charset="utf-8">
</head>
<body>
      <div class="wrapper">
            <select class="customSelect" name="">
                  <option value="Pomme">Pomme</option>
                  <option value="Poire">Poire</option>
                  <option value="Patate">Patate</option>
                  <option value="Ananas">Ananas</option>
            </select>
      </div>

      <script type="text/javascript">
            var select = document.querySelector('.customSelect');
            var wrapper = document.querySelector('.wrapper');
            select.style.display = 'none';
            var newUl = document.createElement('ul');
            newUl.id = "customSelect";
            wrapper.insertBefore(newUl, select);

            for(var i = 0; i < select.length; i++){
                  var newLi = document.createElement('li');
                  newLi.textContent = select[i].value;
                  newUl.appendChild(newLi);

                  aModifier = select;

                  newLi.addEventListener('click', function(event){
                        console.log(aModifier);
                        aModifier.value = this.textContent;

                        var toDisplay = document.querySelectorAll('li');
                        for(var i = 0; i < toDisplay.length; i++){
                              console.log(toHide[i]);
                              toDisplay[i].style.display = "block";
                        }
                  });
            }

            var toHide = document.querySelectorAll('li');
            console.log(toHide);
            for(var i = 0; i < toHide.length; i++){
                  console.log(toHide[i]);
                  toHide[i].style.display = "none";
            }
            toHide[0].style.display = "block";

            //On veut qu'au click de l'option la liste se cache
            var optionSelected = document.querySelector('li.style');

            function hideNotSelected(event){
                if(optionSelected.selectedIndex != 0){
                  for(var i=0; i<optionSelected.length;i++){
                    optionSelected[i].style.display ='none';
                    optionSelected[i].addEventListener('click', hideNotSelected);
                    console.log(event);
                    
                  }
              }
            }

      </script>
</body>
</html>
